@using BlazzingExam.Core.Security
@inject NavigationManager NavigationManager
@inject IPermissionChecker _permissionChecker

@functions{
    [Parameter]
    public int PermissionId { get; set; }

    [Parameter]
    public string ReturnUrl { get; set; } = "/";

    [Parameter]
    public bool ReloadRequired { get; set; } = false;

    protected override async Task OnInitializedAsync()
    {
        if (!await _permissionChecker.HasPermission(PermissionId))
        {
            NavigationManager.NavigateTo(ReturnUrl, ReloadRequired);
        }
    }

}
